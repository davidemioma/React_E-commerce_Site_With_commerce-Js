(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{110:function(e,t,n){e.exports={spinner:"LoadingSpinner_spinner__1wfqD"}},112:function(e,t,n){e.exports={list:"ProductList_list__2693N"}},113:function(e,t,n){e.exports={checkout:"CheckoutForm_checkout__1_6Wd"}},141:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var c=n(36),r=n.n(c),a=n(50),s=n(46),i=(n(141),n(18)),o=n(10),u=n.n(o),l=n(0),j=n(107),d=new(n.n(j).a)("pk_test_403437e6e632cb7aae4238d128eefb90409c2536f572c",!0),b=n(9),m=n(1),h=Object(l.createContext)({cart:{},setCart:function(){},checkoutToken:{},setCheckoutToken:function(){},order:{},setOrder:function(){}});function p(){return Object(l.useContext)(h)}var O=function(e){var t=e.children,n=Object(l.useState)({}),c=Object(b.a)(n,2),r=c[0],a=c[1],s=Object(l.useState)(null),i=Object(b.a)(s,2),o=i[0],u=i[1],j=Object(l.useState)({}),d=Object(b.a)(j,2),p={cart:r,setCart:a,checkoutToken:o,setCheckoutToken:u,order:d[0],setOrder:d[1]};return Object(m.jsx)(h.Provider,{value:p,children:t})},x=n(110),f=n.n(x),v=function(){return Object(m.jsx)("div",{className:f.a.spinner})},_=n(44),k=n.n(_),y=n(47),C=n.n(y);function g(e){var t=e.item,n=e.addCartItemQty,c=e.minusartItemQty,r=e.removeItem;return Object(m.jsxs)("div",{className:C.a.item,children:[Object(m.jsx)("img",{className:C.a.itemImg,src:t.image.url,alt:t.name}),Object(m.jsxs)("div",{className:C.a.details,children:[Object(m.jsxs)("div",{className:C.a.info,children:[Object(m.jsx)("h3",{children:t.name}),Object(m.jsx)("h3",{children:t.price.formatted_with_symbol})]}),Object(m.jsxs)("div",{className:C.a.controls,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:function(){c(t.id,t.quantity-1)},children:"-"}),Object(m.jsx)("p",{children:t.quantity}),Object(m.jsx)("button",{onClick:function(){n(t.id,t.quantity+1)},children:"+"})]}),Object(m.jsx)("button",{onClick:function(){r(t.id)},className:C.a.removeBtn,children:"Remove"})]})]})]})}var N=n(11);function w(e){var t=e.cart,n=p(),c=Object(N.f)(),r=function(){var e=Object(i.a)(u.a.mark((function e(t){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.cart.remove(t);case 2:c=e.sent,r=c.cart,n.setCart(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(i.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.cart.empty();case 2:t=e.sent,c=t.cart,n.setCart(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(i.a)(u.a.mark((function e(t,c){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.cart.update(t,{quantity:c});case 2:r=e.sent,a=r.cart,n.setCart(a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){return Object(m.jsxs)("p",{className:k.a.link,children:["You have no items in Your shopping cart,"," ",Object(m.jsx)(a.b,{to:"/",children:"start adding some!"})]})},b=function(){return Object(m.jsx)("div",{className:k.a.cartList,children:t.line_items.map((function(e){return Object(m.jsx)(g,{item:e,addCartItemQty:o,minusartItemQty:o,removeItem:r},e.id)}))})};return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h1",{children:"Your Shopping Cart"}),t.line_items.length<=0?Object(m.jsx)(j,{}):Object(m.jsxs)(l.Fragment,{children:[Object(m.jsx)(b,{}),Object(m.jsxs)("div",{className:k.a.details,children:[Object(m.jsx)("div",{className:k.a.info,children:Object(m.jsxs)("p",{children:[Object(m.jsx)("span",{children:"SubTotal:"}),t.subtotal.formatted_with_symbol]})}),Object(m.jsxs)("div",{className:k.a.controls,children:[Object(m.jsx)("button",{onClick:s,className:k.a.emptyCart,children:"empty cart"}),Object(m.jsx)("button",{onClick:function(){c("/checkout",{push:!0})},className:k.a.checkout,children:"checkout"})]})]})]})]})}var S=n(83),B=n.n(S),I=n.p+"static/media/commerce.457bea4f.png",T=n(214),F=n(228),P=n(222);function L(e){var t=e.inCartPage,n=p(),c=Object(N.f)();return Object(m.jsx)("div",{className:B.a.nav,children:Object(m.jsxs)("nav",{className:B.a.navBar,children:[Object(m.jsxs)("div",{onClick:function(){c("/",{replace:!0})},children:[Object(m.jsx)("img",{src:I,alt:""}),Object(m.jsx)("h3",{children:"Commerce.js"})]}),!t&&Object(m.jsx)(F.a,{onClick:function(){c("/cart",{push:!0})},"aria-label":"Show cart items",color:"inherit",children:Object(m.jsx)(P.a,{badgeContent:n.cart.total_items,color:"secondary",children:Object(m.jsx)(T.a,{})})})]})})}function A(){var e=p(),t=Object(l.useCallback)(Object(i.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.cart.retrieve();case 2:return n=t.sent,e.setCart(n),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),[e]),n=Object(s.useQuery)("cart",t),c=n.isLoading,r=n.error,a=n.data;return Object(m.jsxs)(l.Fragment,{children:[Object(m.jsx)(L,{inCartPage:!0}),c&&Object(m.jsx)("div",{className:"centered",children:Object(m.jsx)(v,{})}),r&&Object(m.jsx)("div",{className:"centered",children:Object(m.jsx)("p",{children:"Could not get cart ata"})}),a&&Object(m.jsx)(w,{cart:e.cart})]})}var E=n(112),Q=n.n(E),q=n(73),W=n.n(q),Y=n(215);function D(e){var t=e.product,n=e.onAddToCart;return Object(m.jsxs)("div",{className:W.a.product,children:[Object(m.jsx)("img",{className:W.a.productImg,src:t.image.url,alt:t.name}),Object(m.jsxs)("div",{className:W.a.details,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:t.name}),Object(m.jsx)("h3",{children:t.price.formatted_with_symbol})]}),Object(m.jsx)("p",{children:t.description.slice(3,-4)}),Object(m.jsx)("button",{onClick:function(){n(t.id,1)},children:Object(m.jsx)(Y.a,{})})]})]})}function J(e){var t=e.products,n=p(),c=function(){var e=Object(i.a)(u.a.mark((function e(t,c){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.cart.add(t,c);case 2:r=e.sent,a=r.cart,n.setCart(a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:Q.a.list,children:t.map((function(e){return Object(m.jsx)(D,{product:e,onAddToCart:c},e.id)}))})})}function R(){var e=Object(l.useCallback)(Object(i.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.products.list();case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),[]),t=Object(s.useQuery)("products",e),n=t.isLoading,c=t.error,r=t.data;return Object(m.jsxs)(l.Fragment,{children:[Object(m.jsx)(L,{inCartPage:!1}),n&&Object(m.jsx)("div",{className:"centered",children:Object(m.jsx)(v,{})}),c&&Object(m.jsx)("div",{className:"centered",children:Object(m.jsx)("p",{children:"No products available"})}),r&&Object(m.jsx)(J,{products:r})]})}var Z=n(226),M=n(230),X=n(223),G=n(113),V=n.n(G),z=n(64),K=n(224),H=n(220),U=n(225),$=n(55),ee=n(229);function te(e){var t=e.name,n=e.label,c=Object($.d)().control;return Object(m.jsx)("div",{children:Object(m.jsx)($.a,{render:function(e){var t=e.field,c=t.onChange,r=t.onBlur,a=t.value;return Object(m.jsx)(ee.a,{value:a,onBlur:r,onChange:c,style:{width:"100%"},placeholder:n})},defaultValue:"",control:c,fullWidth:!0,name:t,label:n,required:!0})})}var ne=n(65),ce=n.n(ne);function re(e){var t=e.next,n=Object($.c)(),c=p(),r=Object(N.f)(),a=Object(l.useState)([]),s=Object(b.a)(a,2),o=s[0],j=s[1],h=Object(l.useState)(""),O=Object(b.a)(h,2),x=O[0],f=O[1],v=Object(l.useState)([]),_=Object(b.a)(v,2),k=_[0],y=_[1],C=Object(l.useState)(""),g=Object(b.a)(C,2),w=g[0],S=g[1],B=Object(l.useState)([]),I=Object(b.a)(B,2),T=I[0],F=I[1],P=Object(l.useState)(""),L=Object(b.a)(P,2),A=L[0],E=L[1],Q=function(){var e=Object(i.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.services.localeListShippingCountries(t);case 2:n=e.sent,c=n.countries,j(c),f(Object.keys(c)[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(i.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.services.localeListSubdivisions(t);case 2:n=e.sent,c=n.subdivisions,y(c),S(Object.keys(c)[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(i.a)(u.a.mark((function e(t,n){var c,r,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.length>2&&void 0!==a[2]?a[2]:null,e.next=3,d.checkout.getShippingOptions(t,{country:n,region:c});case 3:r=e.sent,F(r),E(r[0].id);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){Q(c.checkoutToken.id)}),[]),Object(l.useEffect)((function(){x&&q(x)}),[x]),Object(l.useEffect)((function(){w&&W(c.checkoutToken.id,x,w)}),[w]);var Y=Object.entries(o).map((function(e){var t=Object(b.a)(e,2);return{id:t[0],label:t[1]}})),D=Object.entries(k).map((function(e){var t=Object(b.a)(e,2);return{id:t[0],label:t[1]}})),J=T.map((function(e){return{id:e.id,label:"".concat(e.description," - (").concat(e.price.formatted_with_symbol,") ")}}));return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Shipping address"}),Object(m.jsx)($.b,Object(z.a)(Object(z.a)({},n),{},{children:Object(m.jsxs)("form",{onSubmit:n.handleSubmit((function(e){return t(Object(z.a)(Object(z.a)({},e),{},{shippingCountry:x,shippingSubdivision:w,shippingOption:A}))})),children:[Object(m.jsxs)("div",{className:ce.a.formContent,children:[Object(m.jsx)(te,{name:"firstName",label:"First name"}),Object(m.jsx)(te,{name:"lastName",label:"Last name"}),Object(m.jsx)(te,{name:"address",label:"Address line 1"}),Object(m.jsx)(te,{name:"email",label:"Email"}),Object(m.jsx)(te,{name:"city",label:"City"}),Object(m.jsx)(te,{name:"code",label:"Zip/Postal code"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(K.a,{children:"Shipping Countries"}),Object(m.jsx)(H.a,{value:x,fullWidth:!0,onChange:function(e){return f(e.target.value)},children:Y.map((function(e){return Object(m.jsx)(U.a,{value:e.id,children:e.label},e.id)}))})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)(K.a,{children:"Shipping Subdivision"}),Object(m.jsx)(H.a,{value:w,fullWidth:!0,onChange:function(e){return S(e.target.value)},children:D.map((function(e){return Object(m.jsx)(U.a,{value:e.id,children:e.label},e.id)}))})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)(K.a,{children:"Shipping Options"}),Object(m.jsx)(H.a,{value:A,fullWidth:!0,onChange:function(e){return E(e.target.value)},children:J.map((function(e){return Object(m.jsx)(U.a,{value:e.id,children:e.label},e.id)}))})]})]}),Object(m.jsxs)("div",{className:ce.a.controls,children:[Object(m.jsx)("button",{type:"button",className:ce.a.backBtn,onClick:function(){r("/cart",{replace:!0})},children:"back to cart"}),Object(m.jsx)("button",{type:"submit",className:ce.a.nextBtn,children:"next"})]})]})}))]})}var ae=n(116),se=n(66),ie=n(48),oe=n.n(ie),ue=n(219),le=Object(ae.a)("pk_test_51KXXk0A0b0rg90QvzvYvtyTkchkp6SImQ195rYEiLYN3FverUnZVBc1Z8MBy7klngaIyTFnedwOGRLM2y34fJqZg001u767Jjt");function je(e){var t=e.shippingData,n=e.backStep,c=e.onCaptureCheckout,r=e.timeout,a=e.nextStep,s=p(),o=function(){var e=Object(i.a)(u.a.mark((function e(n,i,o){var l,j,d,b,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o&&i){e.next=3;break}return e.abrupt("return");case 3:return l=i.getElement(se.CardElement),e.next=6,o.createPaymentMethod({type:"card",card:l});case 6:j=e.sent,d=j.error,b=j.paymentMethod,d?console.log(d):(m={line_items:s.checkoutToken.live.line_items,customer:{firstname:t.firstName,lastname:t.lastName,email:t.email},shipping:{name:"Primary",street:t.address,town_city:t.city,county_state:t.shippingSubdivision,postal_zip_code:t.zip,country:t.shippingCountry},fulfillment:{shipping_method:t.shippingOption},payment:{gateway:"stripe",stripe:{payment_method_id:b.id}}},c(s.checkoutToken.id,m),r(),a());case 10:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:oe.a.paymentForm,children:[Object(m.jsx)("h3",{children:"Order summary"}),Object(m.jsx)("div",{className:oe.a.list,children:s.checkoutToken.live.line_items.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("span",{children:[Object(m.jsx)("p",{style:{fontWeight:800},children:e.name}),Object(m.jsxs)("p",{style:{opacity:.6},children:["Quantity: ",e.quantity]})]}),Object(m.jsx)("p",{children:e.line_total.formatted_with_symbol})]},e.id)}))}),Object(m.jsxs)("div",{className:oe.a.details,children:[Object(m.jsx)("p",{children:"Total"}),Object(m.jsx)("p",{style:{fontWeight:800},children:s.checkoutToken.live.subtotal.formatted_with_symbol})]}),Object(m.jsx)(ue.a,{}),Object(m.jsx)("h3",{children:"Payment method"}),Object(m.jsx)(se.Elements,{stripe:le,children:Object(m.jsx)(se.ElementsConsumer,{children:function(e){var t=e.elements,c=e.stripe;return Object(m.jsxs)("form",{onSubmit:function(e){return o(e,t,c)},children:[Object(m.jsx)(se.CardElement,{}),Object(m.jsxs)("div",{className:oe.a.controls,children:[Object(m.jsx)("button",{onClick:function(){return n()},type:"button",className:oe.a.backBtn,children:"back"}),Object(m.jsxs)("button",{type:"submit",className:oe.a.nextBtn,disabled:!c,children:["Pay"," ",s.checkoutToken.live.subtotal.formatted_with_symbol]})]})]})}})})]})}var de=n(86),be=n.n(de);function me(e){var t=e.isFinished,n=Object(N.f)(),c=p(),r=function(){n("/",{replace:!0})};return Object(m.jsx)(l.Fragment,{children:c.order.customer?Object(m.jsxs)("div",{className:be.a.confirmation,children:[Object(m.jsxs)("h3",{children:["Thank you for your purchase, ",c.order.customer.firstname," ",c.order.customer.lastname]}),Object(m.jsx)(ue.a,{}),Object(m.jsxs)("p",{children:["Order Ref: ",c.order.customer_reference]}),Object(m.jsx)("button",{onClick:r,children:"Back to home"})]}):t?Object(m.jsxs)("div",{className:be.a.confirmation,children:[Object(m.jsx)("h3",{children:"Thank you for your purchase"}),Object(m.jsx)(ue.a,{}),Object(m.jsx)("button",{onClick:r,children:"Back to home"})]}):Object(m.jsx)("div",{className:"centered",children:Object(m.jsx)(v,{})})})}var he=["Shipping address","Payment details"];function pe(){var e=Object(l.useState)(0),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(l.useState)({}),s=Object(b.a)(r,2),o=s[0],j=s[1],h=Object(l.useState)(""),O=Object(b.a)(h,2),x=O[0],f=O[1],v=Object(l.useState)(!1),_=Object(b.a)(v,2),k=_[0],y=_[1],C=Object(N.f)(),g=p();Object(l.useEffect)((function(){var e=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.checkout.generateToken(g.cart.id,{type:"cart"});case 3:t=e.sent,console.log(t),g.setCheckoutToken(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),C("/",{replace:!0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[g.cart]);var w=function(){return c((function(e){return e+1}))},S=function(){return c((function(e){return e-1}))},B=function(e){console.log("data:",e),j(e),w()},I=function(){setTimeout((function(){y(!0)}),1e4)},T=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.cart.refresh();case 2:t=e.sent,g.setCart(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(u.a.mark((function e(t,n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.checkout.capture(t,n);case 3:c=e.sent,g.setOrder(c),T(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f(e.t0.data.error.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){return 0===n?Object(m.jsx)(re,{next:B}):Object(m.jsx)(je,{shippingData:o,backStep:S,onCaptureCheckout:F,timeout:I,nextStep:w})};return Object(m.jsxs)("div",{className:V.a.checkout,children:[Object(m.jsx)("h1",{children:"Checkout"}),Object(m.jsx)(Z.a,{activeStep:n,children:he.map((function(e){return Object(m.jsx)(M.a,{children:Object(m.jsx)(X.a,{children:e})},e)}))}),n===he.length?x?Object(m.jsx)(me,{isFinished:k}):Object(m.jsxs)("p",{style:{textAlign:"center"},children:[x,", go to home page ",Object(m.jsx)(a.b,{to:"/",children:"Home page"})]}):g.checkoutToken&&Object(m.jsx)(P,{})]})}function Oe(){return Object(m.jsxs)(l.Fragment,{children:[Object(m.jsx)(L,{inCartPage:!0}),Object(m.jsx)(pe,{})]})}var xe=function(){return Object(m.jsxs)(N.c,{children:[Object(m.jsx)(N.a,{path:"/",element:Object(m.jsx)(R,{})}),Object(m.jsx)(N.a,{path:"/cart",element:Object(m.jsx)(A,{})}),Object(m.jsx)(N.a,{path:"/checkout",element:Object(m.jsx)(Oe,{})})]})},fe=new s.QueryClient;r.a.render(Object(m.jsx)(a.a,{children:Object(m.jsx)(O,{children:Object(m.jsx)(s.QueryClientProvider,{client:fe,children:Object(m.jsx)(xe,{})})})}),document.getElementById("root"))},44:function(e,t,n){e.exports={link:"CartList_link__2lA1-",cartList:"CartList_cartList__GNb66",details:"CartList_details__1fgym",info:"CartList_info__Zs_YB",controls:"CartList_controls__DfIj_",emptyCart:"CartList_emptyCart__1M8qX",checkout:"CartList_checkout__2dGuq"}},47:function(e,t,n){e.exports={item:"CartItem_item__22A-d",itemImg:"CartItem_itemImg__1RXJT",details:"CartItem_details__2RXnu",info:"CartItem_info__2KBtm",controls:"CartItem_controls__2YhJ-",removeBtn:"CartItem_removeBtn__357IK"}},48:function(e,t,n){e.exports={paymentForm:"PaymentForm_paymentForm__37atW",list:"PaymentForm_list__307Zs",details:"PaymentForm_details__miuuW",controls:"PaymentForm_controls__1xVYJ",backBtn:"PaymentForm_backBtn__81SGc",nextBtn:"PaymentForm_nextBtn__2mAil"}},65:function(e,t,n){e.exports={formContent:"AddressForm_formContent__aiL2i",controls:"AddressForm_controls__T1fvp",backBtn:"AddressForm_backBtn__2bP2l",nextBtn:"AddressForm_nextBtn__1R9vP"}},73:function(e,t,n){e.exports={product:"ProductItem_product__16DI6",productImg:"ProductItem_productImg__3AT52",details:"ProductItem_details__39SN5"}},83:function(e,t,n){e.exports={nav:"NavBar_nav__2VTmb",navBar:"NavBar_navBar__2dFiC"}},86:function(e,t,n){e.exports={confirmation:"Confirmation_confirmation__14DWr"}}},[[179,1,2]]]);
//# sourceMappingURL=main.72df1279.chunk.js.map